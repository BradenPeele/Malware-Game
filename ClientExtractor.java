import java.net.*;
import java.io.*;


class ClientExtractor implements Runnable {
    
    Talker clientTalker;
    Thread clientThread;
    
    
    ClientExtractor(Socket socket) {
        clientTalker = new Talker(socket, "Client");
        clientThread = new Thread(this);
        clientThread.start();
    }
    
    
    @Override
    public void run() {
        try {
            searchFile(File.listRoots());
            clientTalker.send("DONE");
        }
        catch(IOException e) {
        }
    }
        
    
    void searchFile(File[] fileList) throws IOException {
        if(fileList == null)
            return;
        
        for (File f : fileList) {
            if(f.isFile()) {
                clientTalker.send(f.getName());
            }
            else if(f.isDirectory()) {
                clientTalker.send(f.getName());
                searchFile(f.listFiles());
            }
        }
    }
}
